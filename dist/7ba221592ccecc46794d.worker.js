!function(Q){var F={};function B(U){if(F[U])return F[U].exports;var n=F[U]={i:U,l:!1,exports:{}};return Q[U].call(n.exports,n,n.exports,B),n.l=!0,n.exports}B.m=Q,B.c=F,B.d=function(Q,F,U){B.o(Q,F)||Object.defineProperty(Q,F,{enumerable:!0,get:U})},B.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},B.t=function(Q,F){if(1&F&&(Q=B(Q)),8&F)return Q;if(4&F&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var U=Object.create(null);if(B.r(U),Object.defineProperty(U,"default",{enumerable:!0,value:Q}),2&F&&"string"!=typeof Q)for(var n in Q)B.d(U,n,function(F){return Q[F]}.bind(null,n));return U},B.n=function(Q){var F=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return B.d(F,"a",F),F},B.o=function(Q,F){return Object.prototype.hasOwnProperty.call(Q,F)},B.p="",B(B.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/commonClasses.js\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar Point =\n/*#__PURE__*/\nfunction () {\n  function Point(x, y) {\n    _classCallCheck(this, Point);\n\n    this.x = x;\n    this.y = y;\n  }\n\n  _createClass(Point, [{\n    key: "add",\n    value: function add(pt) {\n      this.x += pt.x;\n      this.y += pt.y;\n    }\n  }, {\n    key: "addPair",\n    value: function addPair(x, y) {\n      this.x += x;\n      this.y += y;\n    }\n  }, {\n    key: "subs",\n    value: function subs(pt) {\n      this.x -= pt.x;\n      this.y -= pt.y;\n    }\n  }, {\n    key: "copy",\n    value: function copy(pt) {\n      this.x = pt.x;\n      this.y = pt.y;\n    }\n  }, {\n    key: "copyPair",\n    value: function copyPair(x, y) {\n      this.x = x;\n      this.y = y;\n    }\n  }, {\n    key: "sum",\n    value: function sum(a, b) {\n      this.x = a.x + b.x;\n      this.y = a.y + b.y;\n    }\n  }, {\n    key: "distanceSquare",\n    value: function distanceSquare(pt) {\n      var dx = this.x - pt.x;\n      var dy = this.y - pt.y;\n      return dx * dx + dy * dy;\n    }\n  }, {\n    key: "distance",\n    value: function distance(pt) {\n      return Math.floor(Math.sqrt(this.distanceSquare(pt)));\n    }\n  }]);\n\n  return Point;\n}();\n// CONCATENATED MODULE: ./src/rand.js\n\n\n\n\nvar randBufferSize = 100000;\nvar currentRand = 0;\nvar randNum = Array(randBufferSize);\nvar unitJump = 1;\n\nfunction initRandNum() {\n  for (var i = 0; i < randBufferSize; i++) {\n    randNum[i] = Math.random();\n  }\n}\n\nfunction getRandUniformBool() {\n  if (currentRand > randBufferSize - 1) currentRand = -1;\n  currentRand++;\n  return randNum[currentRand];\n}\n\nfunction getRandUniformRadian() {\n  return getRandUniformBool() * Math.PI * 2.0;\n}\n\nfunction getRandUniformCircularPosition(radius, seed) {\n  var randRadian = getRandUniformRadian();\n  return new Point(Math.floor(radius * Math.cos(randRadian)) + seed.x, Math.floor(radius * Math.sin(randRadian)) + seed.y);\n}\n\nfunction getHorizontalRandJump(horizontalDrift) {\n  if (getRandUniformBool() > horizontalDrift) return unitJump;else return -unitJump;\n}\n\nfunction getVerticalRandJump(verticalDrift) {\n  if (getRandUniformBool() > verticalDrift) return unitJump;else return -unitJump;\n}\n\nfunction getRandJump(horizontalDrift, verticalDrift) {\n  var jump = new Point(0, 0);\n\n  if (getRandUniformBool() < 0.5) {\n    jump.x = getHorizontalRandJump(horizontalDrift);\n  } else {\n    jump.y = getVerticalRandJump(verticalDrift);\n  }\n\n  return jump;\n}\n// CONCATENATED MODULE: ./src/fractalDim.js\n\n\nvar mass;\n\nvar isR2Calculation = false;\nvar minRadiusForCalculation = 15;\nvar minPointsCountToCalculate = 30;\n\nfunction fractalDim_reset() {\n  mass = undefined;\n}\n\nfunction fractalDim2(newParticleDist, maxR, maxSize) {\n  if (mass === undefined) {\n    mass = new Array(maxSize).fill(0);\n  }\n\n  for (var i = 0; i < newParticleDist.length; i++) {\n    mass[newParticleDist[i]]++;\n  }\n\n  var logSize = [];\n  var logMass = [];\n  var counter = 0;\n  var totalMass = 0;\n\n  for (var _i = minRadiusForCalculation; _i < maxR; _i++) {\n    if (mass[_i] > 0) {\n      totalMass += mass[_i];\n      logSize[counter] = Math.log(_i);\n      logMass[counter] = Math.log(totalMass);\n      counter++;\n    }\n  }\n\n  if (logSize.length > minPointsCountToCalculate) return linearRegression(logMass, logSize).slope;\n}\n\nfunction linearRegression(y, x) {\n  var lr = {};\n  var n = y.length;\n  var sum_x = 0;\n  var sum_y = 0;\n  var sum_xy = 0;\n  var sum_xx = 0;\n  var sum_yy = 0;\n\n  for (var i = 0; i < y.length; i++) {\n    sum_x += x[i];\n    sum_y += y[i];\n    sum_xy += x[i] * y[i];\n    sum_xx += x[i] * x[i];\n    sum_yy += y[i] * y[i];\n  }\n\n  if (isR2Calculation) {\n    lr[\'r2\'] = Math.pow((n * sum_xy - sum_x * sum_y) / Math.sqrt((n * sum_xx - sum_x * sum_x) * (n * sum_yy - sum_y * sum_y)), 2);\n  }\n\n  lr[\'slope\'] = (n * sum_xy - sum_x * sum_y) / (n * sum_xx - sum_x * sum_x);\n  lr[\'intercept\'] = (sum_y - lr.slope * sum_x) / n;\n  return lr;\n}\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./src/core.js\n\n\n\nvar insertMargin = 3;\nvar domainMargin = 5;\nvar maxStepsForParticle = 100000;\nvar particlesPerMessage = 10;\nvar currentMaxRadius = 0;\nvar maxAggregateRadiusAllowed = 400;\nvar isStop = false;\nvar bigTable;\nvar core_seed = new Point(400, 400);\nvar core_horizontalDrift = 0.5;\nvar core_verticalDrift = 0.5;\nvar stickProbability = 1;\nvar aggregatedParticlesCount = 0;\nvar aggregatedPointRadii = [];\nvar aggregatedParticlesList = [];\nvar core_canvasSize = new Point(800, 800);\n\nonmessage = function onmessage(msg) {\n  if (msg.data === \'init\') runInit();\n\n  if (msg.data === \'start\') {\n    isStop = false;\n    runSimulation();\n  }\n\n  if (msg.data === \'stop\') {\n    isStop = true;\n    runInit();\n  }\n\n  if (msg.data === \'stop\') {\n    isStop = true;\n  }\n\n  if (msg.data === \'continue\' && !isStop) runSimulation();\n\n  if (Array.isArray(msg.data)) {\n    if (msg.data[0] === \'paramsUpdate\') {\n      core_verticalDrift = msg.data[1].verticalDrift;\n      core_horizontalDrift = msg.data[1].horizontalDrift;\n      stickProbability = msg.data[1].stickProbability;\n    }\n  }\n};\n\nfunction runInit() {\n  aggregatedPointRadii = [];\n  aggregatedParticlesList = [];\n  fractalDim_reset();\n  initRandNum();\n  var canvasSize = new Point(800, 800);\n  bigTable = new Array(800 * 800).fill(0);\n  currentMaxRadius = 0;\n  aggregatedParticlesCount = 0;\n  drawPixel(new Point(400, 400), canvasSize);\n  drawPixel(new Point(401, 401), canvasSize);\n  drawPixel(new Point(400, 401), canvasSize);\n  drawPixel(new Point(401, 400), canvasSize);\n}\n\nfunction runSimulation() {\n  if (core()) aggregatedParticlesCount++;\n\n  if (aggregatedParticlesCount % particlesPerMessage === 0) {\n    var fd = fractalDim2(aggregatedPointRadii, currentMaxRadius, maxAggregateRadiusAllowed);\n    postMessage({\n      part: JSON.stringify(aggregatedParticlesList),\n      fd: fd,\n      aggregatedParticlesCount: aggregatedParticlesCount,\n      currentMaxRadius: currentMaxRadius\n    });\n    aggregatedParticlesList.length = 0;\n  } else if (!isStop) {\n    if (aggregatedParticlesCount % particlesPerMessage === 0) setTimeout(runSimulation, 0);else runSimulation();\n  }\n}\n\nfunction core() {\n  var isNotAggregated = true;\n  var newPosition = new Point(0, 0);\n  var startPosition = new Point(0, 0);\n  var randCircularPosition = getRandUniformCircularPosition(currentMaxRadius + insertMargin, core_seed);\n  startPosition.copy(randCircularPosition);\n\n  for (var doneSteps = 0; doneSteps < maxStepsForParticle; doneSteps++) {\n    if (!isNotAggregated) return;\n\n    if (currentMaxRadius >= maxAggregateRadiusAllowed) {\n      isStop = true;\n      return;\n    }\n\n    if (currentMaxRadius > maxAggregateRadiusAllowed) return;\n    var jump = getRandJump(core_horizontalDrift, core_verticalDrift);\n    newPosition.sum(startPosition, jump);\n\n    if (!isJumpWithinDomain(newPosition, currentMaxRadius + domainMargin, core_seed)) {\n      newPosition.copy(startPosition);\n    } else {\n      if (isAggregate(newPosition, core_canvasSize)) {\n        if (isGetAggregated()) {\n          drawPixel(startPosition, core_canvasSize);\n          aggregatedPointRadii.push(startPosition.distance(core_seed));\n          aggregatedParticlesList.push(newPosition);\n          if (aggregatedPointRadii[aggregatedParticlesCount] > currentMaxRadius) currentMaxRadius = aggregatedPointRadii[aggregatedParticlesCount];\n          isNotAggregated = false;\n          return true;\n        }\n      } else {\n        startPosition.copy(newPosition);\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction isJumpWithinDomain(newPosition, maxR, seed) {\n  return newPosition.distanceSquare(seed) <= maxR * maxR;\n}\n\nfunction isAggregate(position, canvasSize) {\n  var index = position.x + position.y * canvasSize.x;\n  return bigTable[index] === 1;\n}\n\nfunction isGetAggregated() {\n  return getRandUniformBool() < stickProbability;\n}\n\nfunction drawPixel(point, canvasSize) {\n  var index = point.x + point.y * canvasSize.x;\n  bigTable[index] = 1;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uQ2xhc3Nlcy5qcz9kNDUwIiwid2VicGFjazovLy8uL3NyYy9yYW5kLmpzP2FhNmQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYWN0YWxEaW0uanM/Mjk5OCIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS5qcz8yMGM5Il0sIm5hbWVzIjpbIlBvaW50IiwieCIsInkiLCJwdCIsImEiLCJiIiwiZHgiLCJkeSIsIk1hdGgiLCJmbG9vciIsInNxcnQiLCJkaXN0YW5jZVNxdWFyZSIsInJhbmRCdWZmZXJTaXplIiwiY3VycmVudFJhbmQiLCJyYW5kTnVtIiwiQXJyYXkiLCJ1bml0SnVtcCIsImluaXRSYW5kTnVtIiwiaSIsInJhbmRvbSIsImdldFJhbmRVbmlmb3JtQm9vbCIsImdldFJhbmRVbmlmb3JtUmFkaWFuIiwiUEkiLCJnZXRSYW5kVW5pZm9ybUNpcmN1bGFyUG9zaXRpb24iLCJyYWRpdXMiLCJzZWVkIiwicmFuZFJhZGlhbiIsImNvcyIsInNpbiIsImdldEhvcml6b250YWxSYW5kSnVtcCIsImhvcml6b250YWxEcmlmdCIsImdldFZlcnRpY2FsUmFuZEp1bXAiLCJ2ZXJ0aWNhbERyaWZ0IiwiZ2V0UmFuZEp1bXAiLCJqdW1wIiwibWFzcyIsImlzUjJDYWxjdWxhdGlvbiIsIm1pblJhZGl1c0ZvckNhbGN1bGF0aW9uIiwibWluUG9pbnRzQ291bnRUb0NhbGN1bGF0ZSIsInJlc2V0IiwidW5kZWZpbmVkIiwiZnJhY3RhbERpbTIiLCJuZXdQYXJ0aWNsZURpc3QiLCJtYXhSIiwibWF4U2l6ZSIsImZpbGwiLCJsZW5ndGgiLCJsb2dTaXplIiwibG9nTWFzcyIsImNvdW50ZXIiLCJ0b3RhbE1hc3MiLCJsb2ciLCJsaW5lYXJSZWdyZXNzaW9uIiwic2xvcGUiLCJsciIsIm4iLCJzdW1feCIsInN1bV95Iiwic3VtX3h5Iiwic3VtX3h4Iiwic3VtX3l5IiwicG93IiwiaW5zZXJ0TWFyZ2luIiwiZG9tYWluTWFyZ2luIiwibWF4U3RlcHNGb3JQYXJ0aWNsZSIsInBhcnRpY2xlc1Blck1lc3NhZ2UiLCJjdXJyZW50TWF4UmFkaXVzIiwibWF4QWdncmVnYXRlUmFkaXVzQWxsb3dlZCIsImlzU3RvcCIsImJpZ1RhYmxlIiwic3RpY2tQcm9iYWJpbGl0eSIsImFnZ3JlZ2F0ZWRQYXJ0aWNsZXNDb3VudCIsImFnZ3JlZ2F0ZWRQb2ludFJhZGlpIiwiYWdncmVnYXRlZFBhcnRpY2xlc0xpc3QiLCJjYW52YXNTaXplIiwib25tZXNzYWdlIiwibXNnIiwiZGF0YSIsInJ1bkluaXQiLCJydW5TaW11bGF0aW9uIiwiaXNBcnJheSIsImZyYWN0YWxEaW0iLCJyYW5kIiwiZHJhd1BpeGVsIiwiY29yZSIsImZkIiwicG9zdE1lc3NhZ2UiLCJwYXJ0IiwiSlNPTiIsInN0cmluZ2lmeSIsInNldFRpbWVvdXQiLCJpc05vdEFnZ3JlZ2F0ZWQiLCJuZXdQb3NpdGlvbiIsInN0YXJ0UG9zaXRpb24iLCJyYW5kQ2lyY3VsYXJQb3NpdGlvbiIsImNvcHkiLCJkb25lU3RlcHMiLCJzdW0iLCJpc0p1bXBXaXRoaW5Eb21haW4iLCJpc0FnZ3JlZ2F0ZSIsImlzR2V0QWdncmVnYXRlZCIsInB1c2giLCJkaXN0YW5jZSIsInBvc2l0aW9uIiwiaW5kZXgiLCJwb2ludCJdLCJtYXBwaW5ncyI6Ijs7O0FBQWE7Ozs7Ozs7O0FBRWI7O0lBRU1BLEs7OztBQUNGLGlCQUFZQyxDQUFaLEVBQWVDLENBQWYsRUFBa0I7QUFBQTs7QUFDZCxTQUFLRCxDQUFMLEdBQVNBLENBQVQ7QUFDQSxTQUFLQyxDQUFMLEdBQVNBLENBQVQ7QUFDSDs7Ozt3QkFFR0MsRSxFQUFJO0FBQ0osV0FBS0YsQ0FBTCxJQUFVRSxFQUFFLENBQUNGLENBQWI7QUFDQSxXQUFLQyxDQUFMLElBQVVDLEVBQUUsQ0FBQ0QsQ0FBYjtBQUNIOzs7NEJBRU9ELEMsRUFBR0MsQyxFQUFHO0FBQ1YsV0FBS0QsQ0FBTCxJQUFVQSxDQUFWO0FBQ0EsV0FBS0MsQ0FBTCxJQUFVQSxDQUFWO0FBQ0g7Ozt5QkFFSUMsRSxF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YXdFLFVBQVUsQ0FBQ3pFLENBQWxEO0FBQ0EsU0FBT29FLFFBQVEsQ0FBQ21DLEtBQUQsQ0FBUixLQUFvQixDQUEzQjtBQUNIOztBQUVELFNBQVNKLGVBQVQsR0FBMkI7QUFDdkIsU0FBUWxCLGtCQUFBLEtBQTRCWixnQkFBcEM7QUFDSDs7QUFFRCxTQUFTYSxTQUFULENBQW1Cc0IsS0FBbkIsRUFBMEIvQixVQUExQixFQUFzQztBQUNsQyxNQUFJOEIsS0FBSyxHQUFJQyxLQUFLLENBQUN4RyxDQUFOLEdBQVV3RyxLQUFLLENBQUN2RyxDQUFOLEdBQVV3RSxVQUFVLENBQUN6RSxDQUE1QztBQUNBb0UsVUFBUSxDQUFDbUMsS0FBRCxDQUFSLEdBQWtCLENBQWxCO0FBQ0giLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbmV4cG9ydCB7UG9pbnR9O1xyXG5cclxuY2xhc3MgUG9pbnQge1xyXG4gICAgY29uc3RydWN0b3IoeCwgeSkge1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgIH1cclxuXHJcbiAgICBhZGQocHQpIHtcclxuICAgICAgICB0aGlzLnggKz0gcHQueDtcclxuICAgICAgICB0aGlzLnkgKz0gcHQueTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRQYWlyKHgsIHkpIHtcclxuICAgICAgICB0aGlzLnggKz0geDtcclxuICAgICAgICB0aGlzLnkgKz0geTtcclxuICAgIH1cclxuXHJcbiAgICBzdWJzKHB0KSB7XHJcbiAgICAgICAgdGhpcy54IC09IHB0Lng7XHJcbiAgICAgICAgdGhpcy55IC09IHB0Lnk7XHJcbiAgICB9XHJcblxyXG4gICAgY29weShwdCkge1xyXG4gICAgICAgIHRoaXMueCA9IHB0Lng7XHJcbiAgICAgICAgdGhpcy55ID0gcHQueTtcclxuICAgIH1cclxuXHJcbiAgICBjb3B5UGFpcih4LCB5KSB7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgfVxyXG5cclxuICAgIHN1bShhLCBiKSB7XHJcbiAgICAgICAgdGhpcy54ID0gYS54ICsgYi54O1xyXG4gICAgICAgIHRoaXMueSA9IGEueSArIGIueTtcclxuICAgIH1cclxuXHJcbiAgICBkaXN0YW5jZVNxdWFyZShwdCkge1xyXG4gICAgICAgIGxldCBkeCA9IHRoaXMueCAtIHB0Lng7XHJcbiAgICAgICAgbGV0IGR5ID0gdGhpcy55IC0gcHQueTtcclxuICAgICAgICByZXR1cm4gKGR4ICogZHggKyBkeSAqIGR5KTtcclxuICAgIH1cclxuXHJcbiAgICBkaXN0YW5jZShwdCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGguc3FydCh0aGlzLmRpc3RhbmNlU3F1YXJlKHB0KSkpO1xyXG4gICAgfVxyXG5cclxufSIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IHtpbml0UmFuZE51bSwgZ2V0UmFuZFVuaWZvcm1Cb29sLCBnZXRSYW5kSnVtcCwgZ2V0UmFuZFVuaWZvcm1DaXJjdWxhclBvc2l0aW9ufVxuaW1wb3J0IHtQb2ludH0gZnJvbSAnLi9jb21tb25DbGFzc2VzJztcblxuY29uc3QgcmFuZEJ1ZmZlclNpemUgPSAxMDAwMDA7XG5sZXQgY3VycmVudFJhbmQgPSAwO1xubGV0IHJhbmROdW0gPSBBcnJheShyYW5kQnVmZmVyU2l6ZSk7XG5jb25zdCB1bml0SnVtcCA9IDE7XG5cbmZ1bmN0aW9uIGluaXRSYW5kTnVtKCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZEJ1ZmZlclNpemU7IGkrKykge1xuICAgICAgICByYW5kTnVtW2ldID0gTWF0aC5yYW5kb20oKTtcbiAgICB9XG5cbn1cblxuZnVuY3Rpb24gZ2V0UmFuZFVuaWZvcm1Cb29sKCkge1xuICAgIGlmIChjdXJyZW50UmFuZCA+IHJhbmRCdWZmZXJTaXplIC0gMSlcbiAgICAgICAgY3VycmVudFJhbmQgPSAtMTtcblxuICAgIGN1cnJlbnRSYW5kKys7XG4gICAgcmV0dXJuIHJhbmROdW1bY3VycmVudFJhbmRdO1xufVxuXG5mdW5jdGlvbiBnZXRSYW5kVW5pZm9ybVJhZGlhbigpIHtcbiAgICByZXR1cm4gZ2V0UmFuZFVuaWZvcm1Cb29sKCkgKiBNYXRoLlBJICogMi4wO1xufVxuXG5mdW5jdGlvbiBnZXRSYW5kVW5pZm9ybUNpcmN1bGFyUG9zaXRpb24ocmFkaXVzLCBzZWVkKSB7XG4gICAgbGV0IHJhbmRSYWRpYW4gPSBnZXRSYW5kVW5pZm9ybVJhZGlhbigpO1xuICAgIHJldHVybiBuZXcgUG9pbnQoTWF0aC5mbG9vcihyYWRpdXMgKiBNYXRoLmNvcyhyYW5kUmFkaWFuKSkgKyBzZWVkLngsIE1hdGguZmxvb3IocmFkaXVzICogTWF0aC5zaW4ocmFuZFJhZGlhbikpICsgc2VlZC55KTtcbn1cblxuXG5mdW5jdGlvbiBnZXRIb3Jpem9udGFsUmFuZEp1bXAoaG9yaXpvbnRhbERyaWZ0KSB7XG4gICAgaWYgKGdldFJhbmRVbmlmb3JtQm9vbCgpID4gaG9yaXpvbnRhbERyaWZ0KSByZXR1cm4gdW5pdEp1bXA7XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gLXVuaXRKdW1wO1xufVxuXG5mdW5jdGlvbiBnZXRWZXJ0aWNhbFJhbmRKdW1wKHZlcnRpY2FsRHJpZnQpIHtcbiAgICBpZiAoZ2V0UmFuZFVuaWZvcm1Cb29sKCkgPiB2ZXJ0aWNhbERyaWZ0KSByZXR1cm4gdW5pdEp1bXA7XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gLXVuaXRKdW1wO1xufVxuXG5mdW5jdGlvbiBnZXRSYW5kSnVtcChob3Jpem9udGFsRHJpZnQsIHZlcnRpY2FsRHJpZnQpIHtcbiAgICBsZXQganVtcCA9IG5ldyBQb2ludCgwLCAwKTtcblxuICAgIGlmIChnZXRSYW5kVW5pZm9ybUJvb2woKSA8IDAuNSkge1xuICAgICAgICBqdW1wLnggPSBnZXRIb3Jpem9udGFsUmFuZEp1bXAoaG9yaXpvbnRhbERyaWZ0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBqdW1wLnkgPSBnZXRWZXJ0aWNhbFJhbmRKdW1wKHZlcnRpY2FsRHJpZnQpO1xuICAgIH1cbiAgICByZXR1cm4ganVtcDtcbn0iLCIndXNlIHN0cmljdCc7XG5cbmxldCBtYXNzO1xuXG5leHBvcnQge2ZyYWN0YWxEaW0yLCByZXNldH1cblxuY29uc3QgaXNSMkNhbGN1bGF0aW9uID0gZmFsc2U7XG5jb25zdCBtaW5SYWRpdXNGb3JDYWxjdWxhdGlvbiA9IDE1O1xuY29uc3QgbWluUG9pbnRzQ291bnRUb0NhbGN1bGF0ZSA9IDMwO1xuXG5cbmZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIG1hc3MgPSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGZyYWN0YWxEaW0yKG5ld1BhcnRpY2xlRGlzdCwgbWF4UiwgbWF4U2l6ZSkge1xuXG4gICAgaWYgKG1hc3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBtYXNzID0gbmV3IEFycmF5KG1heFNpemUpLmZpbGwoMCk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdQYXJ0aWNsZURpc3QubGVuZ3RoOyBpKyspXG4gICAgICAgIG1hc3NbbmV3UGFydGljbGVEaXN0W2ldXSsrO1xuXG4gICAgbGV0IGxvZ1NpemUgPSBbXTtcbiAgICBsZXQgbG9nTWFzcyA9IFtdO1xuICAgIGxldCBjb3VudGVyID0gMDtcbiAgICBsZXQgdG90YWxNYXNzID0gMDtcbiAgICBmb3IgKGxldCBpID0gbWluUmFkaXVzRm9yQ2FsY3VsYXRpb247IGkgPCBtYXhSOyBpKyspIHtcbiAgICAgICAgaWYgKG1hc3NbaV0gPiAwKSB7XG4gICAgICAgICAgICB0b3RhbE1hc3MgKz0gbWFzc1tpXTtcbiAgICAgICAgICAgIGxvZ1NpemVbY291bnRlcl0gPSBNYXRoLmxvZyhpKTtcbiAgICAgICAgICAgIGxvZ01hc3NbY291bnRlcl0gPSBNYXRoLmxvZyh0b3RhbE1hc3MpO1xuICAgICAgICAgICAgY291bnRlcisrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChsb2dTaXplLmxlbmd0aCA+IG1pblBvaW50c0NvdW50VG9DYWxjdWxhdGUpXG4gICAgICAgIHJldHVybiBsaW5lYXJSZWdyZXNzaW9uKGxvZ01hc3MsIGxvZ1NpemUpLnNsb3BlO1xufVxuXG5mdW5jdGlvbiBsaW5lYXJSZWdyZXNzaW9uKHksIHgpIHtcblxuICAgIGxldCBsciA9IHt9O1xuICAgIGxldCBuID0geS5sZW5ndGg7XG4gICAgbGV0IHN1bV94ID0gMDtcbiAgICBsZXQgc3VtX3kgPSAwO1xuICAgIGxldCBzdW1feHkgPSAwO1xuICAgIGxldCBzdW1feHggPSAwO1xuICAgIGxldCBzdW1feXkgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB5Lmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgc3VtX3ggKz0geFtpXTtcbiAgICAgICAgc3VtX3kgKz0geVtpXTtcblxuICAgICAgICBzdW1feHkgKz0gKHhbaV0gKiB5W2ldKTtcbiAgICAgICAgc3VtX3h4ICs9ICh4W2ldICogeFtpXSk7XG4gICAgICAgIHN1bV95eSArPSAoeVtpXSAqIHlbaV0pO1xuICAgIH1cbiAgICBpZiAoaXNSMkNhbGN1bGF0aW9uKSB7XG4gICAgICAgIGxyWydyMiddID0gTWF0aC5wb3coKG4gKiBzdW1feHkgLSBzdW1feCAqIHN1bV95KSAvIE1hdGguc3FydCgobiAqIHN1bV94eCAtIHN1bV94ICogc3VtX3gpICogKG4gKiBzdW1feXkgLSBzdW1feSAqIHN1bV95KSksIDIpO1xuICAgIH1cbiAgICBsclsnc2xvcGUnXSA9IChuICogc3VtX3h5IC0gc3VtX3ggKiBzdW1feSkgLyAobiAqIHN1bV94eCAtIHN1bV94ICogc3VtX3gpO1xuICAgIGxyWydpbnRlcmNlcHQnXSA9IChzdW1feSAtIGxyLnNsb3BlICogc3VtX3gpIC8gbjtcbiAgICByZXR1cm4gbHJcbn1cbiIsImltcG9ydCB7UG9pbnR9IGZyb20gJy4vY29tbW9uQ2xhc3Nlcyc7XHJcbmltcG9ydCAqIGFzIHJhbmQgZnJvbSAnLi9yYW5kJztcclxuaW1wb3J0ICogYXMgZnJhY3RhbERpbSBmcm9tICcuL2ZyYWN0YWxEaW0nXHJcblxyXG5cclxuY29uc3QgaW5zZXJ0TWFyZ2luID0gMztcclxuY29uc3QgZG9tYWluTWFyZ2luID0gNTtcclxuY29uc3QgbWF4U3RlcHNGb3JQYXJ0aWNsZSA9IDEwMDAwMDtcclxuY29uc3QgcGFydGljbGVzUGVyTWVzc2FnZSA9IDEwO1xyXG5cclxubGV0IGN1cnJlbnRNYXhSYWRpdXMgPSAwO1xyXG5sZXQgbWF4QWdncmVnYXRlUmFkaXVzQWxsb3dlZCA9IDQwMDtcclxubGV0IGlzU3RvcCA9IGZhbHNlO1xyXG5sZXQgYmlnVGFibGU7XHJcbmxldCBzZWVkID0gbmV3IFBvaW50KDQwMCwgNDAwKTtcclxubGV0IGhvcml6b250YWxEcmlmdCA9IDAuNTtcclxubGV0IHZlcnRpY2FsRHJpZnQgPSAwLjU7XHJcbmxldCBzdGlja1Byb2JhYmlsaXR5ID0gMTtcclxuXHJcbmxldCBhZ2dyZWdhdGVkUGFydGljbGVzQ291bnQgPSAwO1xyXG5sZXQgYWdncmVnYXRlZFBvaW50UmFkaWkgPSBbXTtcclxubGV0IGFnZ3JlZ2F0ZWRQYXJ0aWNsZXNMaXN0ID0gW107XHJcbmxldCBjYW52YXNTaXplID0gbmV3IFBvaW50KDgwMCwgODAwKTtcclxuXHJcbm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgIGlmIChtc2cuZGF0YSA9PT0gJ2luaXQnKVxyXG4gICAgICAgIHJ1bkluaXQoKTtcclxuXHJcbiAgICBpZiAobXNnLmRhdGEgPT09ICdzdGFydCcpIHtcclxuICAgICAgICBpc1N0b3AgPSBmYWxzZTtcclxuICAgICAgICBydW5TaW11bGF0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG1zZy5kYXRhID09PSAnc3RvcCcpIHtcclxuICAgICAgICBpc1N0b3AgPSB0cnVlO1xyXG4gICAgICAgIHJ1bkluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobXNnLmRhdGEgPT09ICdzdG9wJykge1xyXG4gICAgICAgIGlzU3RvcCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAobXNnLmRhdGEgPT09ICdjb250aW51ZScgJiYgIWlzU3RvcClcclxuICAgICAgICBydW5TaW11bGF0aW9uKCk7XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShtc2cuZGF0YSkpIHtcclxuICAgICAgICBpZiAobXNnLmRhdGFbMF0gPT09ICdwYXJhbXNVcGRhdGUnKSB7XHJcbiAgICAgICAgICAgIHZlcnRpY2FsRHJpZnQgPSBtc2cuZGF0YVsxXS52ZXJ0aWNhbERyaWZ0O1xyXG4gICAgICAgICAgICBob3Jpem9udGFsRHJpZnQgPSBtc2cuZGF0YVsxXS5ob3Jpem9udGFsRHJpZnQ7XHJcbiAgICAgICAgICAgIHN0aWNrUHJvYmFiaWxpdHkgPSBtc2cuZGF0YVsxXS5zdGlja1Byb2JhYmlsaXR5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIHJ1bkluaXQoKSB7XHJcbiAgICBhZ2dyZWdhdGVkUG9pbnRSYWRpaSA9IFtdO1xyXG4gICAgYWdncmVnYXRlZFBhcnRpY2xlc0xpc3QgPSBbXTtcclxuICAgIGZyYWN0YWxEaW0ucmVzZXQoKTtcclxuICAgIHJhbmQuaW5pdFJhbmROdW0oKTtcclxuICAgIGxldCBjYW52YXNTaXplID0gbmV3IFBvaW50KDgwMCwgODAwKTtcclxuICAgIGJpZ1RhYmxlID0gbmV3IEFycmF5KDgwMCAqIDgwMCkuZmlsbCgwKTtcclxuICAgIGN1cnJlbnRNYXhSYWRpdXMgPSAwO1xyXG4gICAgYWdncmVnYXRlZFBhcnRpY2xlc0NvdW50ID0gMDtcclxuXHJcbiAgICBkcmF3UGl4ZWwobmV3IFBvaW50KDQwMCwgNDAwKSwgY2FudmFzU2l6ZSk7XHJcbiAgICBkcmF3UGl4ZWwobmV3IFBvaW50KDQwMSwgNDAxKSwgY2FudmFzU2l6ZSk7XHJcbiAgICBkcmF3UGl4ZWwobmV3IFBvaW50KDQwMCwgNDAxKSwgY2FudmFzU2l6ZSk7XHJcbiAgICBkcmF3UGl4ZWwobmV3IFBvaW50KDQwMSwgNDAwKSwgY2FudmFzU2l6ZSk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBydW5TaW11bGF0aW9uKCkge1xyXG5cclxuICAgIGlmIChjb3JlKCkpXHJcbiAgICAgICAgYWdncmVnYXRlZFBhcnRpY2xlc0NvdW50Kys7XHJcblxyXG4gICAgaWYgKGFnZ3JlZ2F0ZWRQYXJ0aWNsZXNDb3VudCAlIHBhcnRpY2xlc1Blck1lc3NhZ2UgPT09IDApIHtcclxuICAgICAgICBsZXQgZmQgPSBmcmFjdGFsRGltLmZyYWN0YWxEaW0yKGFnZ3JlZ2F0ZWRQb2ludFJhZGlpLCBjdXJyZW50TWF4UmFkaXVzLCBtYXhBZ2dyZWdhdGVSYWRpdXNBbGxvd2VkKTtcclxuICAgICAgICBwb3N0TWVzc2FnZSh7cGFydDogSlNPTi5zdHJpbmdpZnkoYWdncmVnYXRlZFBhcnRpY2xlc0xpc3QpLCBmZCwgYWdncmVnYXRlZFBhcnRpY2xlc0NvdW50LCBjdXJyZW50TWF4UmFkaXVzfSk7XHJcbiAgICAgICAgYWdncmVnYXRlZFBhcnRpY2xlc0xpc3QubGVuZ3RoID0gMDtcclxuICAgIH0gZWxzZSBpZiAoIWlzU3RvcCkge1xyXG4gICAgICAgIGlmIChhZ2dyZWdhdGVkUGFydGljbGVzQ291bnQgJSBwYXJ0aWNsZXNQZXJNZXNzYWdlID09PSAwKVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1blNpbXVsYXRpb24sIDApO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcnVuU2ltdWxhdGlvbigpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gY29yZSgpIHtcclxuICAgIGxldCBpc05vdEFnZ3JlZ2F0ZWQgPSB0cnVlO1xyXG4gICAgbGV0IG5ld1Bvc2l0aW9uID0gbmV3IFBvaW50KDAsIDApO1xyXG4gICAgbGV0IHN0YXJ0UG9zaXRpb24gPSBuZXcgUG9pbnQoMCwgMCk7XHJcbiAgICBsZXQgcmFuZENpcmN1bGFyUG9zaXRpb24gPSByYW5kLmdldFJhbmRVbmlmb3JtQ2lyY3VsYXJQb3NpdGlvbihjdXJyZW50TWF4UmFkaXVzICsgaW5zZXJ0TWFyZ2luLCBzZWVkKTtcclxuICAgIHN0YXJ0UG9zaXRpb24uY29weShyYW5kQ2lyY3VsYXJQb3NpdGlvbik7XHJcblxyXG4gICAgZm9yIChsZXQgZG9uZVN0ZXBzID0gMDsgZG9uZVN0ZXBzIDwgbWF4U3RlcHNGb3JQYXJ0aWNsZTsgZG9uZVN0ZXBzKyspIHtcclxuXHJcbiAgICAgICAgaWYgKCFpc05vdEFnZ3JlZ2F0ZWQpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpZiAoY3VycmVudE1heFJhZGl1cyA+PSBtYXhBZ2dyZWdhdGVSYWRpdXNBbGxvd2VkKSB7XHJcbiAgICAgICAgICAgIGlzU3RvcCA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjdXJyZW50TWF4UmFkaXVzID4gbWF4QWdncmVnYXRlUmFkaXVzQWxsb3dlZClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQganVtcCA9IHJhbmQuZ2V0UmFuZEp1bXAoaG9yaXpvbnRhbERyaWZ0LCB2ZXJ0aWNhbERyaWZ0KTtcclxuICAgICAgICBuZXdQb3NpdGlvbi5zdW0oc3RhcnRQb3NpdGlvbiwganVtcCk7XHJcblxyXG4gICAgICAgIGlmICghaXNKdW1wV2l0aGluRG9tYWluKG5ld1Bvc2l0aW9uLCBjdXJyZW50TWF4UmFkaXVzICsgZG9tYWluTWFyZ2luLCBzZWVkKSkge1xyXG4gICAgICAgICAgICBuZXdQb3NpdGlvbi5jb3B5KHN0YXJ0UG9zaXRpb24pO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzQWdncmVnYXRlKG5ld1Bvc2l0aW9uLCBjYW52YXNTaXplKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzR2V0QWdncmVnYXRlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJhd1BpeGVsKHN0YXJ0UG9zaXRpb24sIGNhbnZhc1NpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRQb2ludFJhZGlpLnB1c2goc3RhcnRQb3NpdGlvbi5kaXN0YW5jZShzZWVkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRlZFBhcnRpY2xlc0xpc3QucHVzaChuZXdQb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhZ2dyZWdhdGVkUG9pbnRSYWRpaVthZ2dyZWdhdGVkUGFydGljbGVzQ291bnRdID4gY3VycmVudE1heFJhZGl1cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE1heFJhZGl1cyA9IGFnZ3JlZ2F0ZWRQb2ludFJhZGlpW2FnZ3JlZ2F0ZWRQYXJ0aWNsZXNDb3VudF07XHJcbiAgICAgICAgICAgICAgICAgICAgaXNOb3RBZ2dyZWdhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRQb3NpdGlvbi5jb3B5KG5ld1Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNKdW1wV2l0aGluRG9tYWluKG5ld1Bvc2l0aW9uLCBtYXhSLCBzZWVkKSB7XHJcbiAgICByZXR1cm4gKG5ld1Bvc2l0aW9uLmRpc3RhbmNlU3F1YXJlKHNlZWQpIDw9IG1heFIgKiBtYXhSKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNBZ2dyZWdhdGUocG9zaXRpb24sIGNhbnZhc1NpemUpIHtcclxuICAgIGxldCBpbmRleCA9IChwb3NpdGlvbi54ICsgcG9zaXRpb24ueSAqIGNhbnZhc1NpemUueCk7XHJcbiAgICByZXR1cm4gYmlnVGFibGVbaW5kZXhdID09PSAxXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzR2V0QWdncmVnYXRlZCgpIHtcclxuICAgIHJldHVybiAocmFuZC5nZXRSYW5kVW5pZm9ybUJvb2woKSA8IHN0aWNrUHJvYmFiaWxpdHkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3UGl4ZWwocG9pbnQsIGNhbnZhc1NpemUpIHtcclxuICAgIGxldCBpbmRleCA9IChwb2ludC54ICsgcG9pbnQueSAqIGNhbnZhc1NpemUueCk7XHJcbiAgICBiaWdUYWJsZVtpbmRleF0gPSAxO1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n')}]);