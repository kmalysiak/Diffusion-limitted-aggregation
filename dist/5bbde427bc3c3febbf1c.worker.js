!function(Q){var F={};function B(U){if(F[U])return F[U].exports;var n=F[U]={i:U,l:!1,exports:{}};return Q[U].call(n.exports,n,n.exports,B),n.l=!0,n.exports}B.m=Q,B.c=F,B.d=function(Q,F,U){B.o(Q,F)||Object.defineProperty(Q,F,{enumerable:!0,get:U})},B.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},B.t=function(Q,F){if(1&F&&(Q=B(Q)),8&F)return Q;if(4&F&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var U=Object.create(null);if(B.r(U),Object.defineProperty(U,"default",{enumerable:!0,value:Q}),2&F&&"string"!=typeof Q)for(var n in Q)B.d(U,n,function(F){return Q[F]}.bind(null,n));return U},B.n=function(Q){var F=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return B.d(F,"a",F),F},B.o=function(Q,F){return Object.prototype.hasOwnProperty.call(Q,F)},B.p="",B(B.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/commonClasses.js\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar Point =\n/*#__PURE__*/\nfunction () {\n  function Point(x, y) {\n    _classCallCheck(this, Point);\n\n    this.x = x;\n    this.y = y;\n  }\n\n  _createClass(Point, [{\n    key: \"add\",\n    value: function add(pt) {\n      this.x += pt.x;\n      this.y += pt.y;\n    }\n  }, {\n    key: \"addPair\",\n    value: function addPair(x, y) {\n      this.x += x;\n      this.y += y;\n    }\n  }, {\n    key: \"subs\",\n    value: function subs(pt) {\n      this.x -= pt.x;\n      this.y -= pt.y;\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(pt) {\n      this.x = pt.x;\n      this.y = pt.y;\n    }\n  }, {\n    key: \"copyPair\",\n    value: function copyPair(x, y) {\n      this.x = x;\n      this.y = y;\n    }\n  }, {\n    key: \"sum\",\n    value: function sum(a, b) {\n      this.x = a.x + b.x;\n      this.y = a.y + b.y;\n    }\n  }, {\n    key: \"distanceSquare\",\n    value: function distanceSquare(pt) {\n      var dx = this.x - pt.x;\n      var dy = this.y - pt.y;\n      return dx * dx + dy * dy;\n    }\n  }, {\n    key: \"distance\",\n    value: function distance(pt) {\n      return Math.floor(Math.sqrt(this.distanceSquare(pt)));\n    }\n  }]);\n\n  return Point;\n}();\n// CONCATENATED MODULE: ./src/rand.js\n\n\n\n\nvar randBufferSize = 100000;\nvar currentRand = 0;\nvar randNum = Array(randBufferSize);\nvar unitJump = 1;\n\nfunction initRandNum() {\n  for (var i = 0; i < randBufferSize; i++) {\n    randNum[i] = Math.random();\n  }\n}\n\nfunction getRandUniformBool() {\n  if (currentRand > randBufferSize - 1) currentRand = -1;\n  currentRand++;\n  return randNum[currentRand];\n}\n\nfunction getRandUniformRadian() {\n  return getRandUniformBool() * Math.PI * 2.0;\n}\n\nfunction getRandUniformCircularPosition(radius, seed) {\n  var randRadian = getRandUniformRadian();\n  return new Point(Math.floor(radius * Math.cos(randRadian)) + seed.x, Math.floor(radius * Math.sin(randRadian)) + seed.y);\n}\n\nfunction getHorizontalRandJump(horizontalDrift) {\n  if (getRandUniformBool() > horizontalDrift) return unitJump;else return -unitJump;\n}\n\nfunction getVerticalRandJump(verticalDrift) {\n  if (getRandUniformBool() > verticalDrift) return unitJump;else return -unitJump;\n}\n\nfunction getRandJump(horizontalDrift, verticalDrift) {\n  var jump = new Point(0, 0);\n\n  if (getRandUniformBool() < 0.5) {\n    jump.x = getHorizontalRandJump(horizontalDrift);\n  } else {\n    jump.y = getVerticalRandJump(verticalDrift);\n  }\n\n  return jump;\n}\n// CONCATENATED MODULE: ./src/fractalDim.js\n\n\nvar mass;\n\nvar isR2Calculation = false;\n\nfunction fractalDim2(newParticleDist, maxR, maxSize) {\n  if (mass === undefined) {\n    mass = new Array(maxSize).fill(0);\n  }\n\n  for (var i = 0; i < newParticleDist.length; i++) {\n    mass[newParticleDist[i]]++;\n  }\n\n  var logSize = [];\n  var logMass = [];\n  var counter = 0;\n  var totalMass = 0;\n\n  for (var _i = 1; _i < maxR; _i++) {\n    if (mass[_i] > 0) {\n      totalMass += mass[_i];\n      logSize[counter] = Math.log(_i);\n      logMass[counter] = Math.log(totalMass);\n      counter++;\n    }\n  }\n\n  return linearRegression(logMass, logSize).slope;\n}\n\nfunction linearRegression(y, x) {\n  var lr = {};\n  var n = y.length;\n  var sum_x = 0;\n  var sum_y = 0;\n  var sum_xy = 0;\n  var sum_xx = 0;\n  var sum_yy = 0;\n\n  for (var i = 0; i < y.length; i++) {\n    sum_x += x[i];\n    sum_y += y[i];\n    sum_xy += x[i] * y[i];\n    sum_xx += x[i] * x[i];\n    sum_yy += y[i] * y[i];\n  }\n\n  if (isR2Calculation) {\n    lr['r2'] = Math.pow((n * sum_xy - sum_x * sum_y) / Math.sqrt((n * sum_xx - sum_x * sum_x) * (n * sum_yy - sum_y * sum_y)), 2);\n  }\n\n  lr['slope'] = (n * sum_xy - sum_x * sum_y) / (n * sum_xx - sum_x * sum_x);\n  lr['intercept'] = (sum_y - lr.slope * sum_x) / n;\n  return lr;\n}\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./src/core.js\n\n\n // import * as main from './main';\n\nvar currentMaxRadius = 0;\nvar insertMargin = 3;\nvar domainMargin = 5;\nvar maxStepsForParticle = 100000;\nvar maxAggregateRadiusAllowed = 400;\nvar isStop = false;\nvar bigTable;\nvar core_seed = new Point(400, 400);\nvar core_horizontalDrift = 0.5;\nvar core_verticalDrift = 0.5;\nvar stickProbability = 1;\nvar core_canvasSize = new Point(800, 800);\n\nonmessage = function onmessage(msg) {\n  // eslint-disable-next-line no-console\n  //console.log('received command:' + msg.data);\n  if (msg.data == 'init') runInit();\n\n  if (msg.data == 'start') {\n    isStop = false;\n    runSimulation();\n  }\n\n  if (msg.data == 'stop') {\n    isStop = true;\n  }\n\n  if (msg.data == 'continue' && !isStop) runSimulation();\n\n  if (Array.isArray(msg.data)) {\n    if (msg.data[0] == 'paramsUpdate') {\n      core_verticalDrift = msg.data[1].verticalDrift;\n      core_horizontalDrift = msg.data[1].horizontalDrift;\n      stickProbability = msg.data[1].stickProbability;\n      console.log(core_verticalDrift, core_horizontalDrift, stickProbability);\n    }\n  }\n};\n\nfunction runInit() {\n  initRandNum();\n  console.log('I am alive!!');\n  var canvasSize = new Point(800, 800);\n  bigTable = new Array(800 * 800).fill(0); // console.log(rand.getRandUniformCircularPosition(10, new Point(400, 400)));\n\n  drawPixel(new Point(400, 400), canvasSize);\n  drawPixel(new Point(401, 401), canvasSize);\n  drawPixel(new Point(400, 401), canvasSize);\n  drawPixel(new Point(401, 400), canvasSize);\n}\n\nvar aggregatedParticlesCount = 0;\nvar aggregatedPointRadiuses = [];\nvar aggregatedParticlesList = [];\nvar particlesPerMessage = 1;\n\nfunction runSimulation() {\n  //maxAggregateRadius = Math.floor(Math.min(canvasSize.x, canvasSize.y) / 2);\n  if (core()) aggregatedParticlesCount++;\n\n  if (aggregatedParticlesCount % particlesPerMessage === 0) {\n    var fd = fractalDim2(aggregatedPointRadiuses, currentMaxRadius, maxAggregateRadiusAllowed);\n    postMessage({\n      part: JSON.stringify(aggregatedParticlesList),\n      fd: fd,\n      aggregatedParticlesCount: aggregatedParticlesCount,\n      currentMaxRadius: currentMaxRadius\n    });\n    aggregatedParticlesList.length = 0;\n  } else if (!isStop) {\n    if (aggregatedParticlesCount % particlesPerMessage === 0) setTimeout(runSimulation, 0);else runSimulation();\n  }\n}\n\nfunction core() {\n  //  console.log('core on the run for particle:' + aggregatedParticlesCount);\n  var isNotAggregated = true;\n  var newPosition = new Point(0, 0);\n  var startPosition = new Point(0, 0);\n  var randCircularPosition = getRandUniformCircularPosition(currentMaxRadius + insertMargin, core_seed);\n  startPosition.copy(randCircularPosition);\n\n  for (var doneSteps = 0; doneSteps < maxStepsForParticle; doneSteps++) {\n    if (!isNotAggregated) return;\n\n    if (currentMaxRadius >= maxAggregateRadiusAllowed) {\n      isStop = true;\n      return;\n    }\n\n    if (currentMaxRadius > maxAggregateRadiusAllowed) return;\n    var jump = getRandJump(core_horizontalDrift, core_verticalDrift);\n    newPosition.sum(startPosition, jump);\n\n    if (!isJumpWithinDomain(newPosition, currentMaxRadius + domainMargin, core_seed)) {\n      newPosition.copy(startPosition);\n    } else {\n      if (isAggregate(newPosition, core_canvasSize)) {\n        if (isGetAggregated()) {\n          drawPixel(startPosition, core_canvasSize);\n          aggregatedPointRadiuses.push(startPosition.distance(core_seed));\n          aggregatedParticlesList.push(newPosition); // console.log(newPosition, aggregatedParticlesCount,  aggregatedPointRadiuses, currentMaxRadius);\n\n          if (aggregatedPointRadiuses[aggregatedParticlesCount] > currentMaxRadius) currentMaxRadius = aggregatedPointRadiuses[aggregatedParticlesCount];\n          isNotAggregated = false;\n          return true;\n        }\n      } else {\n        startPosition.copy(newPosition);\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction isJumpWithinDomain(newPosition, maxR, seed) {\n  return newPosition.distanceSquare(seed) <= maxR * maxR;\n}\n\nfunction isAggregate(position, canvasSize) {\n  var index = position.x + position.y * canvasSize.x;\n  return bigTable[index] === 1;\n}\n\nfunction isGetAggregated() {\n  return getRandUniformBool() < stickProbability;\n}\n\nfunction drawPixel(point, canvasSize) {\n  var index = point.x + point.y * canvasSize.x;\n  bigTable[index] = 1;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uQ2xhc3Nlcy5qcz9kNDUwIiwid2VicGFjazovLy8uL3NyYy9yYW5kLmpzP2FhNmQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYWN0YWxEaW0uanM/Mjk5OCIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS5qcz8yMGM5Il0sIm5hbWVzIjpbIlBvaW50IiwieCIsInkiLCJwdCIsImEiLCJiIiwiZHgiLCJkeSIsIk1hdGgiLCJmbG9vciIsInNxcnQiLCJkaXN0YW5jZVNxdWFyZSIsInJhbmRCdWZmZXJTaXplIiwiY3VycmVudFJhbmQiLCJyYW5kTnVtIiwiQXJyYXkiLCJ1bml0SnVtcCIsImluaXRSYW5kTnVtIiwiaSIsInJhbmRvbSIsImdldFJhbmRVbmlmb3JtQm9vbCIsImdldFJhbmRVbmlmb3JtUmFkaWFuIiwiUEkiLCJnZXRSYW5kVW5pZm9ybUNpcmN1bGFyUG9zaXRpb24iLCJyYWRpdXMiLCJzZWVkIiwicmFuZFJhZGlhbiIsImNvcyIsInNpbiIsImdldEhvcml6b250YWxSYW5kSnVtcCIsImhvcml6b250YWxEcmlmdCIsImdldFZlcnRpY2FsUmFuZEp1bXAiLCJ2ZXJ0aWNhbERyaWZ0IiwiZ2V0UmFuZEp1bXAiLCJqdW1wIiwibWFzcyIsImlzUjJDYWxjdWxhdGlvbiIsImZyYWN0YWxEaW0yIiwibmV3UGFydGljbGVEaXN0IiwibWF4UiIsIm1heFNpemUiLCJ1bmRlZmluZWQiLCJmaWxsIiwibGVuZ3RoIiwibG9nU2l6ZSIsImxvZ01hc3MiLCJjb3VudGVyIiwidG90YWxNYXNzIiwibG9nIiwibGluZWFyUmVncmVzc2lvbiIsInNsb3BlIiwibHIiLCJuIiwic3VtX3giLCJzdW1feSIsInN1bV94eSIsInN1bV94eCIsInN1bV95eSIsInBvdyIsImN1cnJlbnRNYXhSYWRpdXMiLCJpbnNlcnRNYXJnaW4iLCJkb21haW5NYXJnaW4iLCJtYXhTdGVwc0ZvclBhcnRpY2xlIiwibWF4QWdncmVnYXRlUmFkaXVzQWxsb3dlZCIsImlzU3RvcCIsImJpZ1RhYmxlIiwic3RpY2tQcm9iYWJpbGl0eSIsImNhbnZhc1NpemUiLCJvbm1lc3NhZ2UiLCJtc2ciLCJkYXRhIiwicnVuSW5pdCIsInJ1blNpbXVsYXRpb24iLCJpc0FycmF5IiwiY29uc29sZSIsInJhbmQiLCJkcmF3UGl4ZWwiLCJhZ2dyZWdhdGVkUGFydGljbGVzQ291bnQiLCJhZ2dyZWdhdGVkUG9pbnRSYWRpdXNlcyIsImFnZ3JlZ2F0ZWRQYXJ0aWNsZXNMaXN0IiwicGFydGljbGVzUGVyTWVzc2FnZSIsImNvcmUiLCJmZCIsImZyYWN0YWxEaW0iLCJwb3N0TWVzc2FnZSIsInBhcnQiLCJKU09OIiwic3RyaW5naWZ5Iiwic2V0VGltZW91dCIsImlzTm90QWdncmVnYXRlZCIsIm5ld1Bvc2l0aW9uIiwic3RhcnRQb3NpdGlvbiIsInJhbmRDaXJjdWxhclBvc2l0aW9uIiwiY29weSIsImRvbmVTdGVwcyIsInN1bSIsImlzSnVtcFdpdGhpbkRvbWFpbiIsImlzQWdncmVnYXRlIiwiaXNHZXRBZ2dyZWdhdGVkIiwicHVzaCIsImRpc3RhbmNlIiwicG9zaXRpb24iLCJpbmRleCIsInBvaW50Il0sIm1hcHBpbmdzIjoiOzs7QUFBQTs7Ozs7Ozs7QUFFQTs7SUFFTUEsSzs7O0FBQ0YsaUJBQVlDLENBQVosRUFBZUMsQ0FBZixFQUFrQjtBQUFBOztBQUNkLFNBQUtELENBQUwsR0FBU0EsQ0FBVDtBQUNBLFNBQUtDLENBQUwsR0FBU0EsQ0FBVDtBQUNIOzs7O3dCQUVHQyxFLEVBQUk7QUFDSixXQUFLRixDQUFMLElBQVVFLEVBQUUsQ0FBQ0YsQ0FBYjtBQUNBLFdBQUtDLENBQUwsSUFBVUMsRUFBRSxDQUFDRCxDQUFiO0FBQ0g7Ozs0QkFDT0QsQyxFQUFHQyxDLEVBQUc7QUFDVixXQUFLRCxDQUFMLElBQVVBLENBQVY7QUFDQSxXQUFLQyxDQUFMLElBQVVBLENBQVY7QUFDSDs7O3lCQUVJQyxFLEVBQUk7QUFDTCxXQUFLRixDQUFMLElBQVVFLEVBQUUsQ0FBQ0YsQ0FBYjtBQUNBLFdB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QVVpRSxVQUFVLENBQUNsRSxDQUE1QztBQUNBZ0UsVUFBUSxDQUFDcUMsS0FBRCxDQUFSLEdBQWtCLENBQWxCO0FBQ0giLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xyXG5cclxuZXhwb3J0IHsgUG9pbnQgfTtcclxuXHJcbmNsYXNzIFBvaW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHgsIHkpIHtcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkKHB0KSB7XHJcbiAgICAgICAgdGhpcy54ICs9IHB0Lng7XHJcbiAgICAgICAgdGhpcy55ICs9IHB0Lnk7XHJcbiAgICB9XHJcbiAgICBhZGRQYWlyKHgsIHkpIHtcclxuICAgICAgICB0aGlzLnggKz0geDtcclxuICAgICAgICB0aGlzLnkgKz0geTtcclxuICAgIH1cclxuXHJcbiAgICBzdWJzKHB0KSB7XHJcbiAgICAgICAgdGhpcy54IC09IHB0Lng7XHJcbiAgICAgICAgdGhpcy55IC09IHB0Lnk7XHJcbiAgICB9XHJcblxyXG4gICAgY29weShwdCkge1xyXG4gICAgICAgIHRoaXMueCA9IHB0Lng7XHJcbiAgICAgICAgdGhpcy55ID0gcHQueTtcclxuICAgIH1cclxuXHJcbiAgICBjb3B5UGFpcih4LCB5KSB7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgfVxyXG5cclxuICAgIHN1bShhLCBiKSB7XHJcbiAgICAgICAgdGhpcy54ID0gYS54ICsgYi54XHJcbiAgICAgICAgdGhpcy55ID0gYS55ICsgYi55O1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3RhbmNlU3F1YXJlKHB0KSB7XHJcbiAgICAgICAgbGV0IGR4ID0gdGhpcy54IC0gcHQueDtcclxuICAgICAgICBsZXQgZHkgPSB0aGlzLnkgLSBwdC55O1xyXG4gICAgICAgIHJldHVybiAoZHggKiBkeCArIGR5ICogZHkpO1xyXG4gICAgfVxyXG4gICAgZGlzdGFuY2UocHQpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVNxdWFyZShwdCkpKTtcclxuICAgIH1cclxuXHJcbn0iLCIndXNlIHN0cmljdCdcblxuZXhwb3J0IHsgaW5pdFJhbmROdW0sIGdldFJhbmRVbmlmb3JtQm9vbCwgZ2V0UmFuZEp1bXAsIGdldFJhbmRVbmlmb3JtQ2lyY3VsYXJQb3NpdGlvbiB9XG5pbXBvcnQgeyBQb2ludCB9IGZyb20gJy4vY29tbW9uQ2xhc3Nlcyc7XG5cbmNvbnN0IHJhbmRCdWZmZXJTaXplID0gMTAwMDAwO1xubGV0IGN1cnJlbnRSYW5kID0gMDtcbmxldCByYW5kTnVtID0gQXJyYXkocmFuZEJ1ZmZlclNpemUpO1xuY29uc3QgdW5pdEp1bXAgPSAxO1xuXG5mdW5jdGlvbiBpbml0UmFuZE51bSgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmRCdWZmZXJTaXplOyBpKyspIHtcbiAgICAgICAgcmFuZE51bVtpXSA9IE1hdGgucmFuZG9tKCk7XG4gICAgfVxuXG59XG5cbmZ1bmN0aW9uIGdldFJhbmRVbmlmb3JtQm9vbCgpIHtcbiAgICBpZiAoY3VycmVudFJhbmQgPiByYW5kQnVmZmVyU2l6ZSAtIDEpXG4gICAgICAgIGN1cnJlbnRSYW5kID0gLTE7XG5cbiAgICBjdXJyZW50UmFuZCsrO1xuICAgIHJldHVybiByYW5kTnVtW2N1cnJlbnRSYW5kXTtcbn1cblxuZnVuY3Rpb24gZ2V0UmFuZFVuaWZvcm1SYWRpYW4oKSB7XG4gICAgcmV0dXJuIGdldFJhbmRVbmlmb3JtQm9vbCgpICogTWF0aC5QSSAqIDIuMDtcbn1cblxuZnVuY3Rpb24gZ2V0UmFuZFVuaWZvcm1DaXJjdWxhclBvc2l0aW9uKHJhZGl1cywgc2VlZCkge1xuICAgIGxldCByYW5kUmFkaWFuID0gZ2V0UmFuZFVuaWZvcm1SYWRpYW4oKTtcbiAgICByZXR1cm4gbmV3IFBvaW50KE1hdGguZmxvb3IocmFkaXVzICogTWF0aC5jb3MocmFuZFJhZGlhbikpICsgc2VlZC54LCBNYXRoLmZsb29yKHJhZGl1cyAqIE1hdGguc2luKHJhbmRSYWRpYW4pKSArIHNlZWQueSk7XG59XG5cblxuZnVuY3Rpb24gZ2V0SG9yaXpvbnRhbFJhbmRKdW1wKGhvcml6b250YWxEcmlmdCkge1xuICAgIGlmIChnZXRSYW5kVW5pZm9ybUJvb2woKSA+IGhvcml6b250YWxEcmlmdCkgcmV0dXJuIHVuaXRKdW1wO1xuICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIC11bml0SnVtcDtcbn1cblxuZnVuY3Rpb24gZ2V0VmVydGljYWxSYW5kSnVtcCh2ZXJ0aWNhbERyaWZ0KSB7XG4gICAgaWYgKGdldFJhbmRVbmlmb3JtQm9vbCgpID4gdmVydGljYWxEcmlmdCkgcmV0dXJuIHVuaXRKdW1wO1xuICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIC11bml0SnVtcDtcbn1cblxuZnVuY3Rpb24gZ2V0UmFuZEp1bXAoaG9yaXpvbnRhbERyaWZ0LCB2ZXJ0aWNhbERyaWZ0KSB7XG4gICAgbGV0IGp1bXAgPSBuZXcgUG9pbnQoMCwgMCk7XG5cbiAgICBpZiAoZ2V0UmFuZFVuaWZvcm1Cb29sKCkgPCAwLjUpIHtcbiAgICAgICAganVtcC54ID0gZ2V0SG9yaXpvbnRhbFJhbmRKdW1wKGhvcml6b250YWxEcmlmdCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBqdW1wLnkgPSBnZXRWZXJ0aWNhbFJhbmRKdW1wKHZlcnRpY2FsRHJpZnQpO1xuICAgIH1cbiAgICByZXR1cm4ganVtcDtcbn0iLCIndXNlIHN0cmljdCdcblxubGV0IG1hc3M7XG5cbmV4cG9ydCB7IGZyYWN0YWxEaW0yIH1cblxuY29uc3QgaXNSMkNhbGN1bGF0aW9uID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGZyYWN0YWxEaW0yKG5ld1BhcnRpY2xlRGlzdCwgbWF4UiwgbWF4U2l6ZSkge1xuXG4gICAgaWYobWFzcyA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgbWFzcyA9IG5ldyBBcnJheShtYXhTaXplKS5maWxsKDApO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3UGFydGljbGVEaXN0Lmxlbmd0aDsgaSsrKVxuICAgICAgICBtYXNzW25ld1BhcnRpY2xlRGlzdFtpXV0rKztcblxuICAgIGxldCBsb2dTaXplID0gW107XG4gICAgbGV0IGxvZ01hc3MgPSBbXTtcbiAgICBsZXQgY291bnRlciA9IDA7XG4gICAgbGV0IHRvdGFsTWFzcyA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBtYXhSOyBpKyspIHtcbiAgICAgICAgaWYgKG1hc3NbaV0gPiAwKSB7XG4gICAgICAgICAgICB0b3RhbE1hc3MgKz0gbWFzc1tpXVxuICAgICAgICAgICAgbG9nU2l6ZVtjb3VudGVyXSA9IE1hdGgubG9nKGkpO1xuICAgICAgICAgICAgbG9nTWFzc1tjb3VudGVyXSA9IE1hdGgubG9nKHRvdGFsTWFzcyk7XG4gICAgICAgICAgICBjb3VudGVyKys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxpbmVhclJlZ3Jlc3Npb24obG9nTWFzcywgbG9nU2l6ZSkuc2xvcGU7XG59XG5cbmZ1bmN0aW9uIGxpbmVhclJlZ3Jlc3Npb24oeSwgeCkge1xuXG4gICAgbGV0IGxyID0ge307XG4gICAgbGV0IG4gPSB5Lmxlbmd0aDtcbiAgICBsZXQgc3VtX3ggPSAwO1xuICAgIGxldCBzdW1feSA9IDA7XG4gICAgbGV0IHN1bV94eSA9IDA7XG4gICAgbGV0IHN1bV94eCA9IDA7XG4gICAgbGV0IHN1bV95eSA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHkubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICBzdW1feCArPSB4W2ldO1xuICAgICAgICBzdW1feSArPSB5W2ldO1xuXG4gICAgICAgIHN1bV94eSArPSAoeFtpXSAqIHlbaV0pO1xuICAgICAgICBzdW1feHggKz0gKHhbaV0gKiB4W2ldKTtcbiAgICAgICAgc3VtX3l5ICs9ICh5W2ldICogeVtpXSk7XG4gICAgfVxuICAgIGlmIChpc1IyQ2FsY3VsYXRpb24pIHtcbiAgICAgICAgbHJbJ3IyJ10gPSBNYXRoLnBvdygobiAqIHN1bV94eSAtIHN1bV94ICogc3VtX3kpIC8gTWF0aC5zcXJ0KChuICogc3VtX3h4IC0gc3VtX3ggKiBzdW1feCkgKiAobiAqIHN1bV95eSAtIHN1bV95ICogc3VtX3kpKSwgMik7XG4gICAgfVxuICAgIGxyWydzbG9wZSddID0gKG4gKiBzdW1feHkgLSBzdW1feCAqIHN1bV95KSAvIChuICogc3VtX3h4IC0gc3VtX3ggKiBzdW1feCk7XG4gICAgbHJbJ2ludGVyY2VwdCddID0gKHN1bV95IC0gbHIuc2xvcGUgKiBzdW1feCkgLyBuO1xuICAgIHJldHVybiBsclxufVxuIiwiaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuL2NvbW1vbkNsYXNzZXMnO1xyXG5pbXBvcnQgKiBhcyByYW5kIGZyb20gJy4vcmFuZCc7XHJcbmltcG9ydCAqIGFzIGZyYWN0YWxEaW0gZnJvbSAnLi9mcmFjdGFsRGltJ1xyXG4vLyBpbXBvcnQgKiBhcyBtYWluIGZyb20gJy4vbWFpbic7XHJcblxyXG5sZXQgY3VycmVudE1heFJhZGl1cyA9IDA7XHJcbmNvbnN0IGluc2VydE1hcmdpbiA9IDM7XHJcbmNvbnN0IGRvbWFpbk1hcmdpbiA9IDU7XHJcbmNvbnN0IG1heFN0ZXBzRm9yUGFydGljbGUgPSAxMDAwMDA7XHJcbmxldCBtYXhBZ2dyZWdhdGVSYWRpdXNBbGxvd2VkID0gNDAwO1xyXG5sZXQgaXNTdG9wID0gZmFsc2U7XHJcbmxldCBiaWdUYWJsZTtcclxubGV0IHNlZWQgPSBuZXcgUG9pbnQoNDAwLCA0MDApO1xyXG5sZXQgaG9yaXpvbnRhbERyaWZ0ID0gMC41O1xyXG5sZXQgdmVydGljYWxEcmlmdCA9IDAuNTtcclxubGV0IHN0aWNrUHJvYmFiaWxpdHkgPSAxO1xyXG5cclxuXHJcblxyXG5cclxubGV0IGNhbnZhc1NpemUgPSBuZXcgUG9pbnQoODAwLCA4MDApO1xyXG5cclxub25tZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcclxuICAgIC8vY29uc29sZS5sb2coJ3JlY2VpdmVkIGNvbW1hbmQ6JyArIG1zZy5kYXRhKTtcclxuICAgIGlmIChtc2cuZGF0YSA9PSAnaW5pdCcpXHJcbiAgICAgICAgcnVuSW5pdCgpO1xyXG5cclxuICAgIGlmIChtc2cuZGF0YSA9PSAnc3RhcnQnKSB7XHJcbiAgICAgICAgIGlzU3RvcCA9IGZhbHNlO1xyXG4gICAgICAgIHJ1blNpbXVsYXRpb24oKTtcclxuICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGlmIChtc2cuZGF0YSA9PSAnc3RvcCcpIHtcclxuICAgICAgICBpc1N0b3AgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgaWYobXNnLmRhdGEgPT0gJ2NvbnRpbnVlJyAmJiAhaXNTdG9wKVxyXG4gICAgICAgIHJ1blNpbXVsYXRpb24oKTtcclxuICAgIGlmKEFycmF5LmlzQXJyYXkobXNnLmRhdGEpKXtcclxuICAgICAgICBpZihtc2cuZGF0YVswXSA9PSdwYXJhbXNVcGRhdGUnKXtcclxuICAgICAgICAgICAgdmVydGljYWxEcmlmdCA9IG1zZy5kYXRhWzFdLnZlcnRpY2FsRHJpZnQ7XHJcbiAgICAgICAgICAgIGhvcml6b250YWxEcmlmdCA9IG1zZy5kYXRhWzFdLmhvcml6b250YWxEcmlmdDtcclxuICAgICAgICAgICAgc3RpY2tQcm9iYWJpbGl0eSA9IG1zZy5kYXRhWzFdLnN0aWNrUHJvYmFiaWxpdHk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZlcnRpY2FsRHJpZnQsIGhvcml6b250YWxEcmlmdCwgc3RpY2tQcm9iYWJpbGl0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufTtcclxuXHJcbmZ1bmN0aW9uIHJ1bkluaXQoKSB7XHJcbiAgICByYW5kLmluaXRSYW5kTnVtKCk7XHJcbiAgICBjb25zb2xlLmxvZygnSSBhbSBhbGl2ZSEhJyk7XHJcblxyXG4gICAgbGV0IGNhbnZhc1NpemUgPSBuZXcgUG9pbnQoODAwLCA4MDApO1xyXG4gICAgYmlnVGFibGUgPSBuZXcgQXJyYXkoODAwICogODAwKS5maWxsKDApO1xyXG4gICAgLy8gY29uc29sZS5sb2cocmFuZC5nZXRSYW5kVW5pZm9ybUNpcmN1bGFyUG9zaXRpb24oMTAsIG5ldyBQb2ludCg0MDAsIDQwMCkpKTtcclxuICAgIGRyYXdQaXhlbChuZXcgUG9pbnQoNDAwLCA0MDApLCBjYW52YXNTaXplKTtcclxuICAgIGRyYXdQaXhlbChuZXcgUG9pbnQoNDAxLCA0MDEpLCBjYW52YXNTaXplKTtcclxuICAgIGRyYXdQaXhlbChuZXcgUG9pbnQoNDAwLCA0MDEpLCBjYW52YXNTaXplKTtcclxuICAgIGRyYXdQaXhlbChuZXcgUG9pbnQoNDAxLCA0MDApLCBjYW52YXNTaXplKTtcclxufVxyXG5cclxubGV0IGFnZ3JlZ2F0ZWRQYXJ0aWNsZXNDb3VudCA9IDA7XHJcbmxldCBhZ2dyZWdhdGVkUG9pbnRSYWRpdXNlcyA9IFtdO1xyXG5sZXQgYWdncmVnYXRlZFBhcnRpY2xlc0xpc3QgPSBbXTtcclxubGV0IHBhcnRpY2xlc1Blck1lc3NhZ2UgPSAxO1xyXG5cclxuZnVuY3Rpb24gcnVuU2ltdWxhdGlvbigpIHtcclxuICAgIC8vbWF4QWdncmVnYXRlUmFkaXVzID0gTWF0aC5mbG9vcihNYXRoLm1pbihjYW52YXNTaXplLngsIGNhbnZhc1NpemUueSkgLyAyKTtcclxuICAgIGlmIChjb3JlKCkpXHJcbiAgICAgICAgYWdncmVnYXRlZFBhcnRpY2xlc0NvdW50Kys7XHJcblxyXG4gICAgaWYgKGFnZ3JlZ2F0ZWRQYXJ0aWNsZXNDb3VudCAlIHBhcnRpY2xlc1Blck1lc3NhZ2UgPT09IDApIHtcclxuICAgICAgICBsZXQgZmQgPSBmcmFjdGFsRGltLmZyYWN0YWxEaW0yKGFnZ3JlZ2F0ZWRQb2ludFJhZGl1c2VzLGN1cnJlbnRNYXhSYWRpdXMsIG1heEFnZ3JlZ2F0ZVJhZGl1c0FsbG93ZWQgKTtcclxuICAgICAgICBwb3N0TWVzc2FnZSh7IHBhcnQ6IEpTT04uc3RyaW5naWZ5KGFnZ3JlZ2F0ZWRQYXJ0aWNsZXNMaXN0KSwgZmQsIGFnZ3JlZ2F0ZWRQYXJ0aWNsZXNDb3VudCwgIGN1cnJlbnRNYXhSYWRpdXMgfSk7XHJcbiAgICAgICAgYWdncmVnYXRlZFBhcnRpY2xlc0xpc3QubGVuZ3RoID0gMDtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgICAgICBpZiAoIWlzU3RvcCkge1xyXG4gICAgICAgICAgICBpZiAoYWdncmVnYXRlZFBhcnRpY2xlc0NvdW50ICUgcGFydGljbGVzUGVyTWVzc2FnZSA9PT0gMClcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQocnVuU2ltdWxhdGlvbiwgMCk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHJ1blNpbXVsYXRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBjb3JlKCkge1xyXG4gICAgLy8gIGNvbnNvbGUubG9nKCdjb3JlIG9uIHRoZSBydW4gZm9yIHBhcnRpY2xlOicgKyBhZ2dyZWdhdGVkUGFydGljbGVzQ291bnQpO1xyXG4gICAgbGV0IGlzTm90QWdncmVnYXRlZCA9IHRydWU7XHJcbiAgICBsZXQgbmV3UG9zaXRpb24gPSBuZXcgUG9pbnQoMCwgMCk7XHJcbiAgICBsZXQgc3RhcnRQb3NpdGlvbiA9IG5ldyBQb2ludCgwLCAwKTtcclxuICAgIGxldCByYW5kQ2lyY3VsYXJQb3NpdGlvbiA9IHJhbmQuZ2V0UmFuZFVuaWZvcm1DaXJjdWxhclBvc2l0aW9uKGN1cnJlbnRNYXhSYWRpdXMgKyBpbnNlcnRNYXJnaW4sIHNlZWQpO1xyXG4gICAgc3RhcnRQb3NpdGlvbi5jb3B5KHJhbmRDaXJjdWxhclBvc2l0aW9uKTtcclxuXHJcbiAgICBmb3IgKGxldCBkb25lU3RlcHMgPSAwOyBkb25lU3RlcHMgPCBtYXhTdGVwc0ZvclBhcnRpY2xlOyBkb25lU3RlcHMrKykge1xyXG5cclxuICAgICAgICBpZiAoIWlzTm90QWdncmVnYXRlZClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGlmIChjdXJyZW50TWF4UmFkaXVzID49IG1heEFnZ3JlZ2F0ZVJhZGl1c0FsbG93ZWQpIHtcclxuICAgICAgICAgICAgaXNTdG9wID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGN1cnJlbnRNYXhSYWRpdXMgPiBtYXhBZ2dyZWdhdGVSYWRpdXNBbGxvd2VkKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIGxldCBqdW1wID0gcmFuZC5nZXRSYW5kSnVtcChob3Jpem9udGFsRHJpZnQsIHZlcnRpY2FsRHJpZnQpO1xyXG4gICAgICAgIG5ld1Bvc2l0aW9uLnN1bShzdGFydFBvc2l0aW9uLCBqdW1wKVxyXG5cclxuICAgICAgICBpZiAoIWlzSnVtcFdpdGhpbkRvbWFpbihuZXdQb3NpdGlvbiwgY3VycmVudE1heFJhZGl1cyArIGRvbWFpbk1hcmdpbiwgc2VlZCkpIHtcclxuICAgICAgICAgICAgbmV3UG9zaXRpb24uY29weShzdGFydFBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzQWdncmVnYXRlKG5ld1Bvc2l0aW9uLCBjYW52YXNTaXplKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzR2V0QWdncmVnYXRlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJhd1BpeGVsKHN0YXJ0UG9zaXRpb24sIGNhbnZhc1NpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRQb2ludFJhZGl1c2VzLnB1c2goc3RhcnRQb3NpdGlvbi5kaXN0YW5jZShzZWVkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRlZFBhcnRpY2xlc0xpc3QucHVzaChuZXdQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobmV3UG9zaXRpb24sIGFnZ3JlZ2F0ZWRQYXJ0aWNsZXNDb3VudCwgIGFnZ3JlZ2F0ZWRQb2ludFJhZGl1c2VzLCBjdXJyZW50TWF4UmFkaXVzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFnZ3JlZ2F0ZWRQb2ludFJhZGl1c2VzW2FnZ3JlZ2F0ZWRQYXJ0aWNsZXNDb3VudF0gPiBjdXJyZW50TWF4UmFkaXVzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50TWF4UmFkaXVzID0gYWdncmVnYXRlZFBvaW50UmFkaXVzZXNbYWdncmVnYXRlZFBhcnRpY2xlc0NvdW50XTtcclxuICAgICAgICAgICAgICAgICAgICBpc05vdEFnZ3JlZ2F0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydFBvc2l0aW9uLmNvcHkobmV3UG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0p1bXBXaXRoaW5Eb21haW4obmV3UG9zaXRpb24sIG1heFIsIHNlZWQpIHtcclxuICAgIHJldHVybiAobmV3UG9zaXRpb24uZGlzdGFuY2VTcXVhcmUoc2VlZCkgPD0gbWF4UiAqIG1heFIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0FnZ3JlZ2F0ZShwb3NpdGlvbiwgY2FudmFzU2l6ZSkge1xyXG4gICAgbGV0IGluZGV4ID0gKHBvc2l0aW9uLnggKyBwb3NpdGlvbi55ICogY2FudmFzU2l6ZS54KTtcclxuICAgIHJldHVybiBiaWdUYWJsZVtpbmRleF0gPT09IDFcclxufVxyXG5cclxuZnVuY3Rpb24gaXNHZXRBZ2dyZWdhdGVkKCkge1xyXG4gICAgcmV0dXJuIChyYW5kLmdldFJhbmRVbmlmb3JtQm9vbCgpIDwgc3RpY2tQcm9iYWJpbGl0eSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdQaXhlbChwb2ludCwgY2FudmFzU2l6ZSkge1xyXG4gICAgbGV0IGluZGV4ID0gKHBvaW50LnggKyBwb2ludC55ICogY2FudmFzU2l6ZS54KTtcclxuICAgIGJpZ1RhYmxlW2luZGV4XSA9IDE7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")}]);